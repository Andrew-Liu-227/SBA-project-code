<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SBA Logic: Business Plan Wizard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Tailwind CSS & Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    html, body { font-family: 'Inter', sans-serif; background: #f3f8fd;}
    .fade { transition: opacity 0.7s, transform 0.7s;}
    .fade-out { opacity: 0; transform: scale(0.98) translateY(40px);}
    .fade-in { opacity: 1; transform: scale(1) translateY(0);}
    .slide { display: none; }
    .slide.active { display: block; }
    .wizard-anim { animation: wizardIn 1s cubic-bezier(.8,0,.25,1) forwards;}
    @keyframes wizardIn { 0%{opacity:0;transform:scale(.92) translateY(64px);} 100%{opacity:1;transform:none;} }
    /* Carousel placeholder */
    .carousel-ad {background:linear-gradient(90deg,#bbeafe 50%,#f4e1fb 100%);}
    .ad-slide {width:100%;height:70px;display:flex;align-items:center;justify-content:center;color:#2563eb;font-weight:700;font-size:1.15rem;}
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <!-- Home Page -->
  <main id="home" class="fade fade-in flex flex-col items-center justify-center min-h-screen">
    <header class="w-full max-w-2xl mt-10 mb-6 text-center">
      <h1 class="text-4xl md:text-5xl font-bold text-blue-700 mb-3 tracking-tight">SBA Logic</h1>
      <p class="text-lg md:text-xl text-blue-800">Step-by-step business plan wizard for SBA loan & grant applications</p>
    </header>
    <section class="bg-white rounded-2xl shadow-md max-w-2xl w-full p-7 mb-7">
      <h2 class="text-xl font-semibold text-blue-600 mb-2">What is SBA Logic?</h2>
      <p class="mb-2 text-slate-700">SBA Logic guides you through writing a complete business plan, using <span class="font-medium">official SBA-recommended structure</span> and logic tools to make your plan persuasive—while emphasizing <span class="font-semibold text-blue-800">honesty</span> in every section.</p>
      <ul class="text-slate-600 text-base mb-4 pl-6 list-disc">
        <li>Clear steps for every business plan section</li>
        <li>Tips on pitching, structure, and evidence</li>
        <li>Download as PDF or Word—ready to submit</li>
      </ul>
      <h3 class="text-blue-600 mt-4 mb-2 font-semibold">How it works</h3>
      <ol class="text-slate-700 pl-5 list-decimal space-y-1">
        <li>Start the wizard—one section at a time</li>
        <li>Read short tips with each prompt (with simple logic/argument pointers!)</li>
        <li>Preview and download your final business plan instantly</li>
      </ol>
    </section>
    <!-- Carousel Ads Placeholder -->
    <div class="carousel-ad w-full max-w-2xl rounded-xl mb-10 flex overflow-hidden">
      <div class="ad-slide animate-pulse">Partner Ad 1 Placeholder</div>
      <div class="ad-slide hidden">Partner Ad 2 Placeholder</div>
    </div>
    <button id="startBtn" class="mt-2 px-8 py-4 bg-blue-600 text-white text-xl rounded-2xl font-bold shadow-lg hover:bg-blue-700 transition-all"
      onclick="startWizard()">Start the Wizard</button>
    <footer class="mt-16 text-slate-400 text-sm">Built for chambers of commerce & business support—free forever.</footer>
  </main>

  <!-- Wizard -->
  <form id="wizard" class="wizard-anim hidden mx-auto my-8 max-w-2xl w-full bg-white rounded-2xl shadow-xl p-6 fade" autocomplete="off" onsubmit="return false;">
    <!-- Progress bar -->
    <div class="w-full bg-blue-100 h-2 rounded mb-6"><div id="progressBar" class="h-full bg-blue-400 rounded transition-all"></div></div>
    <!-- Slide content here, all in one place for brevity -->
    <section class="slide active" data-slide>
      <h2 class="text-2xl font-bold text-blue-700 mb-2">Welcome!</h2>
      <p class="mb-5 text-blue-800">Answer a few questions and you'll get a complete, ready-to-download business plan in SBA format. The wizard will help you <span class="font-semibold">build your argument</span> step-by-step.</p>
      <button type="button" class="px-5 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 transition-all" onclick="nextSlide()">Begin</button>
    </section>
    <!-- Wizard steps: 1. Company Description -->
    <section class="slide" data-slide>
      <h2 class="text-xl font-bold text-blue-700 mb-1">1. Company Description</h2>
      <div class="mb-2 text-sm text-blue-500 animate-pulse">Tip: Start with honest facts, but frame your company in a way that makes your strengths <span class="font-bold">salient</span>. What makes you valuable? (<em>Premise + Evidence</em>)</div>
      <textarea required rows="5" class="w-full border p-2 rounded mb-2" placeholder="Describe your business, its mission, principal members, and legal structure." id="company"></textarea>
      <div class="flex justify-between"><button type="button" class="btnNav" onclick="prevSlide()">Back</button><button type="button" class="btnNav-primary" onclick="nextSlide()">Next</button></div>
    </section>
    <!-- 2. Market Research -->
    <section class="slide" data-slide>
      <h2 class="text-xl font-bold text-blue-700 mb-1">2. Market Research</h2>
      <div class="mb-2 text-sm text-blue-500 animate-pulse">Tip: <strong>Who</strong> is your market, and what do they need? Show you understand their world (<em>logic: audience analysis</em>). Use facts or honest estimates, and note where your info comes from.</div>
      <textarea required rows="5" class="w-full border p-2 rounded mb-2" placeholder="Describe your market, industry, customers, and advantages." id="market"></textarea>
      <div class="flex justify-between"><button type="button" class="btnNav" onclick="prevSlide()">Back</button><button type="button" class="btnNav-primary" onclick="nextSlide()">Next</button></div>
    </section>
    <!-- 3. Regulations -->
    <section class="slide" data-slide>
      <h2 class="text-xl font-bold text-blue-700 mb-1">3. Regulations</h2>
      <div class="mb-2 text-sm text-blue-500 animate-pulse">Tip: Show that you’re aware of and compliant with all key regulations. (<em>Defeater: loaners need to know you aren’t missing legal steps!</em>)</div>
      <textarea required rows="3" class="w-full border p-2 rounded mb-2" placeholder="List key regulations you comply with." id="regulations"></textarea>
      <div class="flex justify-between"><button type="button" class="btnNav" onclick="prevSlide()">Back</button><button type="button" class="btnNav-primary" onclick="nextSlide()">Next</button></div>
    </section>
    <!-- 4. Service Line -->
    <section class="slide" data-slide>
      <h2 class="text-xl font-bold text-blue-700 mb-1">4. Product/Service Line</h2>
      <div class="mb-2 text-sm text-blue-500 animate-pulse">Tip: Make your offerings <strong>concrete</strong>. Give specifics, not just buzzwords. (Loaners want clarity: "What will you actually do or sell?")</div>
      <textarea required rows="4" class="w-full border p-2 rounded mb-2" placeholder="List and describe your products or services. Include pricing structure if known." id="services"></textarea>
      <div class="flex justify-between"><button type="button" class="btnNav" onclick="prevSlide()">Back</button><button type="button" class="btnNav-primary" onclick="nextSlide()">Next</button></div>
    </section>
    <!-- 5. Intellectual Property & R&D -->
    <section class="slide" data-slide>
      <h2 class="text-xl font-bold text-blue-700 mb-1">5. IP &amp; R&D</h2>
      <div class="mb-2 text-sm text-blue-500 animate-pulse">Tip: Do you have unique assets (name, process, tech)? Is there any ongoing research or new product development?</div>
      <textarea required rows="3" class="w-full border p-2 rounded mb-2" placeholder="Describe trademarks, patents, tech, and any research/development." id="ip"></textarea>
      <div class="flex justify-between"><button type="button" class="btnNav" onclick="prevSlide()">Back</button><button type="button" class="btnNav-primary" onclick="nextSlide()">Next</button></div>
    </section>
    <!-- 6. Marketing & Sales -->
    <section class="slide" data-slide>
      <h2 class="text-xl font-bold text-blue-700 mb-1">6. Marketing &amp; Sales</h2>
      <div class="mb-2 text-sm text-blue-500 animate-pulse">Tip: How will you <span class="font-bold">reach</span> your customers? Show logical connection from your market analysis to your plan. (<em>If your audience is X, how do you find them?</em>)</div>
      <textarea required rows="4" class="w-full border p-2 rounded mb-2" placeholder="Explain how you will find, communicate with, and sell to your customers." id="marketing"></textarea>
      <div class="flex justify-between"><button type="button" class="btnNav" onclick="prevSlide()">Back</button><button type="button" class="btnNav-primary" onclick="nextSlide()">Next</button></div>
    </section>
    <!-- 7. Future & Growth -->
    <section class="slide" data-slide>
      <h2 class="text-xl font-bold text-blue-700 mb-1">7. Future &amp; Growth</h2>
      <div class="mb-2 text-sm text-blue-500 animate-pulse">Tip: Show ambition but stay honest. Your “future” plan is a <em>hypothesis</em>: back it up with logic or reasonable evidence if possible.</div>
      <textarea required rows="3" class="w-full border p-2 rounded mb-2" placeholder="Share your vision for growth and future development." id="future"></textarea>
      <div class="flex justify-between"><button type="button" class="btnNav" onclick="prevSlide()">Back</button><button type="button" class="btnNav-primary" onclick="nextSlide()">Next</button></div>
    </section>
    <!-- 8. Honest Pitch (Final Summary & Emphasis on Truthfulness) -->
    <section class="slide" data-slide>
      <h2 class="text-xl font-bold text-blue-700 mb-1">8. Pitch & Honesty Check</h2>
      <div class="mb-2 text-sm text-blue-500 animate-bounce">Tip: Your argument is only as strong as its truth. Summarize your company’s story in 2–3 sentences, then list any <span class="font-bold text-blue-700">uncertainties</span> or challenges honestly. <span class="italic">(Loaners value candor, not bluffing.)</span></div>
      <textarea required rows="3" class="w-full border p-2 rounded mb-2" placeholder="Craft your honest summary and note any risks or unknowns." id="honesty"></textarea>
      <div class="flex justify-between"><button type="button" class="btnNav" onclick="prevSlide()">Back</button><button type="button" class="btnNav-primary" onclick="nextSlide()">Next</button></div>
    </section>
    <!-- Preview & Download -->
    <section class="slide" data-slide>
      <h2 class="text-xl font-bold text-blue-700 mb-1">Preview & Download</h2>
      <div class="mb-4 text-blue-600">Check your full business plan below. Download as PDF or Word (docx).</div>
      <div id="planPreview" class="rounded-lg border p-4 bg-blue-50 min-h-[240px] mb-4"></div>
      <div class="flex flex-wrap gap-4">
        <button type="button" class="px-4 py-2 bg-blue-500 text-white rounded-md font-semibold" onclick="downloadPDF()">Download PDF</button>
        <button type="button" class="px-4 py-2 bg-blue-300 text-blue-800 rounded-md font-semibold" onclick="downloadWord()">Download Word</button>
        <button type="button" class="btnNav" onclick="prevSlide()">Back</button>
      </div>
    </section>
  </form>
  <script>
    // ===== Minimalist Style Helpers =====
    document.querySelectorAll('.btnNav').forEach(el => el.className += " px-4 py-2 bg-blue-100 text-blue-700 rounded-lg font-semibold hover:bg-blue-200 transition-all");
    document.querySelectorAll('.btnNav-primary').forEach(el => el.className += " px-4 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-700 transition-all");

    // ====== Animation Handling ======
    function startWizard() {
      document.getElementById('home').classList.remove('fade-in');
      document.getElementById('home').classList.add('fade-out');
      setTimeout(() => {
        document.getElementById('home').classList.add('hidden');
        document.getElementById('wizard').classList.remove('hidden');
        setTimeout(()=>document.getElementById('wizard').classList.add('fade-in'),10);
      }, 700);
    }
    // ====== Wizard Navigation ======
    const slides = [...document.querySelectorAll('[data-slide]')];
    let currentSlide = 0;
    function showSlide(i) {
      slides.forEach((s, idx) => s.classList.toggle('active', idx === i));
      document.getElementById('progressBar').style.width = (i/(slides.length-1))*100 + "%";
      currentSlide = i;
      if (i === slides.length-1) buildPreview();
    }
    function nextSlide() {
      if (!validateSlide(currentSlide)) return;
      showSlide(currentSlide+1);
    }
    function prevSlide() { showSlide(currentSlide-1);}
    // ====== Data State ======
    const state = {};
    function validateSlide(i) {
      const ids = ['company','market','regulations','services','ip','marketing','future','honesty'];
      if(i>0 && i<=ids.length){
        const ta = document.getElementById(ids[i-1]);
        if(!ta.value.trim()){ ta.classList.add('border-red-400'); setTimeout(()=>ta.classList.remove('border-red-400'),800); ta.focus(); return false; }
        state[ids[i-1]] = ta.value.trim();
      }
      return true;
    }
    // ====== Build Plan Preview ======
    function buildPreview(){
      const p = state, escape = t => (t||'').replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>");
      document.getElementById('planPreview').innerHTML = `
        <h2 class="text-xl font-bold text-blue-700 mb-2">Business Plan</h2>
        <div class="mb-2"><span class="font-semibold text-blue-800">1. Company Description:</span><br>${escape(p.company)}</div>
        <div class="mb-2"><span class="font-semibold text-blue-800">2. Market Research:</span><br>${escape(p.market)}</div>
        <div class="mb-2"><span class="font-semibold text-blue-800">3. Regulations:</span><br>${escape(p.regulations)}</div>
        <div class="mb-2"><span class="font-semibold text-blue-800">4. Product/Service Line:</span><br>${escape(p.services)}</div>
        <div class="mb-2"><span class="font-semibold text-blue-800">5. Intellectual Property & R&D:</span><br>${escape(p.ip)}</div>
        <div class="mb-2"><span class="font-semibold text-blue-800">6. Marketing & Sales:</span><br>${escape(p.marketing)}</div>
        <div class="mb-2"><span class="font-semibold text-blue-800">7. Future & Growth:</span><br>${escape(p.future)}</div>
        <div class="mb-2"><span class="font-semibold text-blue-800">8. Honest Pitch:</span><br>${escape(p.honesty)}</div>
        <div class="text-xs text-slate-500 text-right pt-2">Generated by SBA Logic</div>
      `;
    }
    // ====== PDF Download ======
    async function downloadPDF() {
      const preview = document.getElementById('planPreview');
      const canvas = await html2canvas(preview, {scale:2, useCORS:true});
      const imgData = canvas.toDataURL("image/png");
      const { jsPDF } = window.jspdf;
      const pdf = new jsPDF({unit:'pt',format:'a4'});
      const width = pdf.internal.pageSize.getWidth();
      const height = canvas.height * (width / canvas.width);
      pdf.addImage(imgData,"PNG",0,0,width,height);
      pdf.save("Business_Plan.pdf");
    }
    // ====== Word Download ======
    function downloadWord() {
      const preview = document.getElementById('planPreview').innerHTML;
      const header = "<html><head><meta charset='utf-8'><title>Business Plan</title></head><body>";
      const footer = "</body></html>";
      const blob = new Blob([header+preview+footer],{type:"application/msword"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = "Business_Plan.doc"; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    }
  </script>
</body>
</html>
